# Шаблон для верстки в связке с Gulp

## О шаблоне

Данный шаблон создан для верстки как одностраничных, так и для многостраничных сайтов. Он работает в связке с GULP.

В свою очередь GULP может обрабатывать следующие задачи:

- Удаление комментариев и минификация файлов `.html`;
- Удаление комментариев и минификация файлов `.css`;
- Комфортная работа с препроцессором `Sass/Scss`;
- Удаление комментариев и минификация файлов `.js`;
- Обработка изображений самых популярных форматов. На выходе получаем сжатое изображение с меньшим размером;
- [Конвертация шрифтов](#конвертация-шрифтов) в форматы `woff` и `woff2`. Параллельное их подключение в файлы стилей;
- Запуск и автоматическое обновление локального сервера после внесения изменений в код посредством [Browser Sync](#конфигурация-browser-sync).

## Содержание

- [Установка проекта](#установка-проекта)
- [Руководство по ведению проекта](#руководство-по-ведению-проекта)
- [Работа с путями](#работа-с-путями)
- [Команды NPM](#команды-npm)
- [Конфигурация Browser Sync](#конфигурация-browser-sync)
- [Конвертация шрифтов](#конвертация-шрифтов)

## Установка проекта

Перед началом работы выполнить следующие действия:

- Скопировать проект с репозитория командой `git clone https://github.com/NVinox/GulpTemplate.git`;
- Выполнить в терминале команду `npm install` для установки перечисленных зависимостей;
- Если вы работаете из под Windows, то активируйте получение уведомлений.
  > Это сделано для удобства обработки ошибок плагина `gulp-notify`, который выдает ошибку в саму OS, а не только в терминал.<br>[Подробнее](https://www.npmjs.com/package/gulp-notify "Ссылка на пакет gulp-notify")
- Установить плагин [Path Autocomplete](https://marketplace.visualstudio.com/items?itemName=ionutvmi.path-autocomplete, "Ссылка на страницу плагина");
- Перейти в `settings.json` и прописать следующие настройки для [Path Autocomplete](https://marketplace.visualstudio.com/items?itemName=ionutvmi.path-autocomplete, "Ссылка на страницу плагина"):
  ```
    "path-autocomplete.pathMappings": {
  	"@image": "${folder}/src/assets/images",
  	"@script": "${folder}/src/assets/scripts",
  	"@scss": "${folder}/src/assets/scss"
  }
  ```

## Руководство по ведению проекта

Небольшая нотация:

- Если в директории указан файл (либо директория) с конкретным названием и расширением, то он необходим к созданию;
- `...` - любое количество директорий.

### Расположение папок для разработки

```
  |-dist-  Директория для сборки результа
  |-src-   Директория в которой ведется разработка
        |-index.html
        |-assets-
                |-fonts-
                      |...
                |-html-
                      |...
                |-images-
                      |...
                |-scripts-
                      |...
                      |-script.js
                |-scss-
                      |...
                      |-global-
                              |...
                      |-index.scss
```

## Работа с путями

При работе с путями в `HTML` (подключение изображений, скриптов) необходимо использовать сниппет `@img` или `@script`.<br>
Сниппет сам будет автодополнять нужный модуль или файл из дирректории скриптов или изображений.

```
<script type="module" src="@script/script.js"></script>
```

## Команды NPM

Описание команд `npm` в `scripts`:

- `dev` - запуск в обычном режиме. Запускается `Watcher` и разворачивается локальный сервер `Browser Sync`
  > Запуск: `npm run dev`
- `oserver` - запускается в режиме уже установленного локального сервера. Запускается в случае, когда не нужен `Browser Sync`
  > Запуск: `npm run oserver`
- `build` - сухая сборка проекта без запуска дополнительных инструментов разработки.
  > Запуск: `npm run build`

## Конфигурация Browser Sync

Запуск локального сервера происходит на дефолтном порту 3000.<br>
Если у вас по каким-либо причинам занят этот порт, то следует его изменить в настройках `Browser Sync`.<br>
Для этого перейдите в директорию `gulp -> tasks -> server.js` и измените порт.

```
  plugins.browserSync.init({
		server: `./${path.distPath}`,
		port: 3000, - Поменять этот порт!
	});
```

## Конвертация шрифтов.

Конвертация шрифтов происходит один раз при появлении в директории `src -> assets -> fonts` файлов шрифтов. То есть вы добавляете файлы шрифтов и просто запускаете сборку. Далее он сам их конвертирует и подключает в стили.<br>
Подключение файла в `index.scss` необходимо сделать вручную.<br>
Так как корректирование шрифтов происходит довольно редко, то наблюдатель не следит за их изменениями.

Если по каким-то причинам вам нужно добавить новый шрифт, то вы должны выполнить следующие действия:

- Остановить Gulp;
- Удалить файл `src -> assets -> scss -> global -> fonts.scss`;
- Добавить новый файл шрифта в `src -> assets -> fonts`;
- Запустить сборку в любом режиме.
